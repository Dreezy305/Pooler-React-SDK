{"version":3,"file":"index.modern.js","sources":["../src/script.tsx","../src/usePooler.tsx","../src/PoolerButton.tsx"],"sourcesContent":["import * as React from 'react'\n\nconst loadedScripts: {\n  src?: string\n} = {}\n\ninterface ScriptStatusInterface {\n  loaded: boolean\n  error: boolean\n}\n\nconst src = 'https://js.poolerapp.com/v1/inline.js'\n\nexport default function usePoolerScript(): readonly [boolean, boolean] {\n  const [state, setState] = React.useState<ScriptStatusInterface>({\n    loaded: false,\n    error: false\n  })\n\n  React.useEffect((): (() => void) | void => {\n    if (loadedScripts?.hasOwnProperty(src)) {\n      setState({\n        loaded: true,\n        error: false\n      })\n    } else {\n      loadedScripts.src = src\n\n      const script = document.createElement('script')\n      script.src = src\n      script.async = true\n\n      const onScriptLoad = (): void => {\n        setState({\n          loaded: true,\n          error: false\n        })\n      }\n\n      const onScriptError = (): void => {\n        delete loadedScripts.src\n\n        setState({\n          loaded: true,\n          error: true\n        })\n      }\n\n      script.addEventListener('load', onScriptLoad)\n      script.addEventListener('complete', onScriptLoad)\n      script.addEventListener('error', onScriptError)\n\n      document.body.appendChild(script)\n\n      return () => {\n        script.removeEventListener('load', onScriptLoad)\n        script.removeEventListener('error', onScriptError)\n      }\n    }\n  }, [])\n\n  return [state.loaded, state.error] as const\n}\n","import React from 'react'\nimport usePoolerScript from './script'\nimport { PoolerConfig } from './types'\n\nexport default function usePooler(poolerConfig: PoolerConfig): any {\n  const [loaded, error] = usePoolerScript()\n\n  React.useEffect(() => {\n    if (error) throw new Error('Unable to initialise Pooler SDK')\n  }, [error])\n\n  const handlePoolerSend = (): any => {\n    if (error) throw new Error('Unable to initialise Pooler SDK')\n\n    if (loaded) {\n      const config: PoolerConfig = {\n        amount: poolerConfig?.amount,\n        callback: poolerConfig?.callback,\n        email: poolerConfig?.email,\n        public_key: poolerConfig?.public_key,\n        transaction_reference: poolerConfig?.transaction_reference,\n        success_message: poolerConfig?.success_message,\n        error_message: poolerConfig?.error_message,\n        onClose: poolerConfig?.onClose\n      }\n      // @ts-ignore\n      const Pooler = window?.Pooler\n      return (\n        // @ts-ignore\n        Pooler.Popup(config)\n      )\n    }\n  }\n\n  return handlePoolerSend\n}\n","import React from 'react'\nimport { PoolerConfig } from './types'\nimport usePooler from './usePooler'\n\ninterface PoolerButtonProps extends PoolerConfig {\n  children?: string | React.ReactNode\n  className?: string\n  disabled?: boolean\n  loading?: boolean\n}\n\nexport default function poolerButton({\n  children,\n  className,\n  disabled,\n  loading,\n  ...rest\n}: PoolerButtonProps): JSX.Element {\n  const { handlePoolerSend } = usePooler(rest)\n  return (\n    <button\n      disabled={disabled}\n      className={className || 'pooler-button '}\n      onClick={handlePoolerSend}\n    >\n      {children}\n    </button>\n  )\n}\n"],"names":["loadedScripts","src","usePoolerScript","state","setState","React","loaded","error","hasOwnProperty","script","document","createElement","async","onScriptLoad","onScriptError","addEventListener","body","appendChild","removeEventListener","usePooler","poolerConfig","useEffect","Error","handlePoolerSend","_window","config","amount","callback","email","public_key","transaction_reference","success_message","error_message","onClose","Pooler","window","Popup","poolerButton","children","className","disabled","loading","rest","onClick"],"mappings":"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"}