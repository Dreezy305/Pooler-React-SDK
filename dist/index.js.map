{"version":3,"file":"index.js","sources":["../src/script.tsx","../src/usePooler.tsx","../src/PoolerButton.tsx"],"sourcesContent":["import * as React from 'react'\n\nconst loadedScripts: {\n  src?: string\n} = {}\n\ninterface ScriptStatusInterface {\n  loaded: boolean\n  error: boolean\n}\n\nconst src = 'https://js.poolerapp.com/v1/inline.js'\n\nexport default function usePoolerScript(): readonly [boolean, boolean] {\n  const [state, setState] = React.useState<ScriptStatusInterface>({\n    loaded: false,\n    error: false\n  })\n\n  React.useEffect((): (() => void) | void => {\n    if (loadedScripts?.hasOwnProperty(src)) {\n      setState({\n        loaded: true,\n        error: false\n      })\n    } else {\n      loadedScripts.src = src\n\n      const script = document.createElement('script')\n      script.src = src\n      script.async = true\n\n      const onScriptLoad = (): void => {\n        setState({\n          loaded: true,\n          error: false\n        })\n      }\n\n      const onScriptError = (): void => {\n        delete loadedScripts.src\n\n        setState({\n          loaded: true,\n          error: true\n        })\n      }\n\n      script.addEventListener('load', onScriptLoad)\n      script.addEventListener('complete', onScriptLoad)\n      script.addEventListener('error', onScriptError)\n\n      document.body.appendChild(script)\n\n      return () => {\n        script.removeEventListener('load', onScriptLoad)\n        script.removeEventListener('error', onScriptError)\n      }\n    }\n  }, [])\n\n  return [state.loaded, state.error] as const\n}\n","import React from 'react'\nimport usePoolerScript from './script'\nimport { PoolerConfig } from './types'\n\nexport default function usePooler(poolerConfig: PoolerConfig): any {\n  const [loaded, error] = usePoolerScript()\n\n  React.useEffect(() => {\n    if (error) throw new Error('Unable to initialise Pooler SDK')\n  }, [error])\n\n  const handlePoolerSend = (): any => {\n    if (error) throw new Error('Unable to initialise Pooler SDK')\n\n    if (loaded) {\n      const config: PoolerConfig = {\n        amount: poolerConfig?.amount,\n        callback: poolerConfig?.callback,\n        email: poolerConfig?.email,\n        public_key: poolerConfig?.public_key,\n        transaction_reference: poolerConfig?.transaction_reference,\n        success_message: poolerConfig?.success_message,\n        error_message: poolerConfig?.error_message,\n        onClose: poolerConfig?.onClose\n      }\n      // @ts-ignore\n      const Pooler = window?.Pooler\n      return (\n        // @ts-ignore\n        Pooler.Popup(config)\n      )\n    }\n  }\n\n  return handlePoolerSend\n}\n","import React from 'react'\nimport { PoolerConfig } from './types'\nimport usePooler from './usePooler'\n\ninterface PoolerButtonProps extends PoolerConfig {\n  children?: string | React.ReactNode\n  className?: string\n  disabled?: boolean\n  loading?: boolean\n}\n\nexport default function poolerButton({\n  children,\n  className,\n  disabled,\n  loading,\n  ...rest\n}: PoolerButtonProps): JSX.Element {\n  const { handlePoolerSend } = usePooler(rest)\n  return (\n    <button\n      disabled={disabled}\n      className={className || 'pooler-button '}\n      onClick={handlePoolerSend}\n    >\n      {children}\n    </button>\n  )\n}\n"],"names":["loadedScripts","src","usePoolerScript","_React$useState","React","loaded","error","state","setState","hasOwnProperty","script","document","createElement","async","onScriptLoad","onScriptError","addEventListener","body","appendChild","removeEventListener","usePooler","poolerConfig","_usePoolerScript","useEffect","Error","handlePoolerSend","_window","config","amount","callback","email","public_key","transaction_reference","success_message","error_message","onClose","Pooler","window","Popup","poolerButton","_ref","children","className","disabled","loading","rest","_objectWithoutPropertiesLoose","_excluded","_usePooler","onClick"],"mappings":"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"}