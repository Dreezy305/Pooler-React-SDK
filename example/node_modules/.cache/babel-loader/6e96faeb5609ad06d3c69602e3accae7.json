{"ast":null,"code":"import React__default, { useState, useEffect } from 'react';\nconst loadedScripts = {};\nconst src = 'https://js.poolerapp.com/v1/inline.js';\nfunction usePoolerScript() {\n  const [state, setState] = useState({\n    loaded: false,\n    error: false\n  });\n  useEffect(() => {\n    if (loadedScripts !== null && loadedScripts !== void 0 && loadedScripts.hasOwnProperty(src)) {\n      setState({\n        loaded: true,\n        error: false\n      });\n    } else {\n      loadedScripts.src = src;\n      const script = document.createElement('script');\n      script.src = src;\n      script.async = true;\n      const onScriptLoad = () => {\n        setState({\n          loaded: true,\n          error: false\n        });\n      };\n      const onScriptError = () => {\n        delete loadedScripts.src;\n        setState({\n          loaded: true,\n          error: true\n        });\n      };\n      script.addEventListener('load', onScriptLoad);\n      script.addEventListener('complete', onScriptLoad);\n      script.addEventListener('error', onScriptError);\n      document.body.appendChild(script);\n      return () => {\n        script.removeEventListener('load', onScriptLoad);\n        script.removeEventListener('error', onScriptError);\n      };\n    }\n  }, []);\n  return [state.loaded, state.error];\n}\nfunction usePooler(poolerConfig) {\n  const [loaded, error] = usePoolerScript();\n  React__default.useEffect(() => {\n    if (error) throw new Error('Unable to initialise Pooler SDK');\n  }, [error]);\n  const handlePoolerSend = () => {\n    if (error) throw new Error('Unable to initialise Pooler SDK');\n    if (loaded) {\n      var _window;\n      const config = {\n        amount: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.amount,\n        callback: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.callback,\n        email: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.email,\n        public_key: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.public_key,\n        transaction_reference: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.transaction_reference,\n        success_message: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.success_message,\n        error_message: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.error_message,\n        onClose: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.onClose\n      };\n      const Pooler = (_window = window) === null || _window === void 0 ? void 0 : _window.Pooler;\n      return Pooler.Popup(config);\n    }\n  };\n  return handlePoolerSend;\n}\nfunction poolerButton({\n  children,\n  className,\n  disabled,\n  loading,\n  ...rest\n}) {\n  const {\n    handlePoolerSend\n  } = usePooler(rest);\n  return React__default.createElement(\"button\", {\n    disabled: disabled,\n    className: className || 'pooler-button ',\n    onClick: handlePoolerSend\n  }, children);\n}\nvar types = {\n  __proto__: null\n};\nexport { poolerButton as PoolerButton, types as PoolerCon, usePooler };","map":{"version":3,"names":["loadedScripts","src","usePoolerScript","state","setState","useState","loaded","error","useEffect","hasOwnProperty","script","document","createElement","async","onScriptLoad","onScriptError","addEventListener","body","appendChild","removeEventListener","usePooler","poolerConfig","React__default","Error","handlePoolerSend","_window","config","amount","callback","email","public_key","transaction_reference","success_message","error_message","onClose","Pooler","window","Popup","poolerButton","children","className","disabled","loading","rest","onClick"],"sources":["../src/script.tsx","../src/usePooler.tsx","../src/poolerButton.tsx"],"sourcesContent":["import * as React from 'react'\n\nconst loadedScripts: {\n  src?: string\n} = {}\n\ninterface ScriptStatusInterface {\n  loaded: boolean\n  error: boolean\n}\n\nconst src = 'https://js.poolerapp.com/v1/inline.js'\n\nexport default function usePoolerScript(): readonly [boolean, boolean] {\n  const [state, setState] = React.useState<ScriptStatusInterface>({\n    loaded: false,\n    error: false\n  })\n\n  React.useEffect((): (() => void) | void => {\n    if (loadedScripts?.hasOwnProperty(src)) {\n      setState({\n        loaded: true,\n        error: false\n      })\n    } else {\n      loadedScripts.src = src\n\n      const script = document.createElement('script')\n      script.src = src\n      script.async = true\n\n      const onScriptLoad = (): void => {\n        setState({\n          loaded: true,\n          error: false\n        })\n      }\n\n      const onScriptError = (): void => {\n        delete loadedScripts.src\n\n        setState({\n          loaded: true,\n          error: true\n        })\n      }\n\n      script.addEventListener('load', onScriptLoad)\n      script.addEventListener('complete', onScriptLoad)\n      script.addEventListener('error', onScriptError)\n\n      document.body.appendChild(script)\n\n      return () => {\n        script.removeEventListener('load', onScriptLoad)\n        script.removeEventListener('error', onScriptError)\n      }\n    }\n  }, [])\n\n  return [state.loaded, state.error] as const\n}\n","import React from 'react'\nimport usePoolerScript from './script'\nimport { PoolerConfig } from './types'\n\nexport default function usePooler(poolerConfig: PoolerConfig): any {\n  const [loaded, error] = usePoolerScript()\n\n  React.useEffect(() => {\n    if (error) throw new Error('Unable to initialise Pooler SDK')\n  }, [error])\n\n  const handlePoolerSend = (): any => {\n    if (error) throw new Error('Unable to initialise Pooler SDK')\n\n    if (loaded) {\n      const config: PoolerConfig = {\n        amount: poolerConfig?.amount,\n        callback: poolerConfig?.callback,\n        email: poolerConfig?.email,\n        public_key: poolerConfig?.public_key,\n        transaction_reference: poolerConfig?.transaction_reference,\n        success_message: poolerConfig?.success_message,\n        error_message: poolerConfig?.error_message,\n        onClose: poolerConfig?.onClose\n      }\n      // @ts-ignore\n      const Pooler = window?.Pooler\n      return (\n        // @ts-ignore\n        Pooler.Popup(config)\n      )\n    }\n  }\n\n  return handlePoolerSend\n}\n","import React from 'react'\nimport { PoolerConfig } from './types'\nimport usePooler from './usePooler'\n\ninterface PoolerButtonProps extends PoolerConfig {\n  children?: string | React.ReactNode\n  className?: string\n  disabled?: boolean\n  loading?: boolean\n}\n\nexport default function poolerButton({\n  children,\n  className,\n  disabled,\n  loading,\n  ...rest\n}: PoolerButtonProps): JSX.Element {\n  const { handlePoolerSend } = usePooler(rest)\n  return (\n    <button\n      disabled={disabled}\n      className={className || 'pooler-button '}\n      onClick={handlePoolerSend}\n    >\n      {children}\n    </button>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}