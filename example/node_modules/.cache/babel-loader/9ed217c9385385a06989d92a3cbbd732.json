{"ast":null,"code":"import React__default, { useState, useEffect } from 'react';\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nvar loadedScripts = {};\nvar src = 'https://js.poolerapp.com/v1/inline.js';\nfunction usePoolerScript() {\n  var _React$useState = useState({\n      loaded: false,\n      error: false\n    }),\n    state = _React$useState[0],\n    setState = _React$useState[1];\n  useEffect(function () {\n    if (loadedScripts !== null && loadedScripts !== void 0 && loadedScripts.hasOwnProperty(src)) {\n      setState({\n        loaded: true,\n        error: false\n      });\n    } else {\n      loadedScripts.src = src;\n      var script = document.createElement('script');\n      script.src = src;\n      script.async = true;\n      var onScriptLoad = function onScriptLoad() {\n        setState({\n          loaded: true,\n          error: false\n        });\n      };\n      var onScriptError = function onScriptError() {\n        delete loadedScripts.src;\n        setState({\n          loaded: true,\n          error: true\n        });\n      };\n      script.addEventListener('load', onScriptLoad);\n      script.addEventListener('complete', onScriptLoad);\n      script.addEventListener('error', onScriptError);\n      document.body.appendChild(script);\n      return function () {\n        script.removeEventListener('load', onScriptLoad);\n        script.removeEventListener('error', onScriptError);\n      };\n    }\n  }, []);\n  return [state.loaded, state.error];\n}\nfunction usePooler(poolerConfig) {\n  var _usePoolerScript = usePoolerScript(),\n    loaded = _usePoolerScript[0],\n    error = _usePoolerScript[1];\n  React__default.useEffect(function () {\n    if (error) throw new Error('Unable to initialise Pooler SDK');\n  }, [error]);\n  var handlePoolerSend = function handlePoolerSend() {\n    if (error) throw new Error('Unable to initialise Pooler SDK');\n    if (loaded) {\n      var _window;\n      var config = {\n        amount: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.amount,\n        callback: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.callback,\n        email: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.email,\n        public_key: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.public_key,\n        transaction_reference: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.transaction_reference,\n        success_message: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.success_message,\n        error_message: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.error_message,\n        onClose: poolerConfig === null || poolerConfig === void 0 ? void 0 : poolerConfig.onClose\n      };\n      var Pooler = (_window = window) === null || _window === void 0 ? void 0 : _window.Pooler;\n      return Pooler.Popup(config);\n    }\n  };\n  return handlePoolerSend;\n}\nvar _excluded = [\"children\", \"className\", \"disabled\", \"loading\"];\nfunction poolerButton(_ref) {\n  var children = _ref.children,\n    className = _ref.className,\n    disabled = _ref.disabled,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var _usePooler = usePooler(rest),\n    handlePoolerSend = _usePooler.handlePoolerSend;\n  return React__default.createElement(\"button\", {\n    disabled: disabled,\n    className: className || 'pooler-button ',\n    onClick: handlePoolerSend\n  }, children);\n}\nvar types = {\n  __proto__: null\n};\nexport { poolerButton as PoolerButton, types as PoolerConfig, usePooler };","map":{"version":3,"names":["loadedScripts","src","usePoolerScript","_React$useState","useState","loaded","error","state","setState","useEffect","hasOwnProperty","script","document","createElement","async","onScriptLoad","onScriptError","addEventListener","body","appendChild","removeEventListener","usePooler","poolerConfig","_usePoolerScript","React__default","Error","handlePoolerSend","_window","config","amount","callback","email","public_key","transaction_reference","success_message","error_message","onClose","Pooler","window","Popup","poolerButton","_ref","children","className","disabled","rest","_objectWithoutPropertiesLoose","_excluded","_usePooler","onClick"],"sources":["../src/script.tsx","../src/usePooler.tsx","../src/PoolerButton.tsx"],"sourcesContent":["import * as React from 'react'\n\nconst loadedScripts: {\n  src?: string\n} = {}\n\ninterface ScriptStatusInterface {\n  loaded: boolean\n  error: boolean\n}\n\nconst src = 'https://js.poolerapp.com/v1/inline.js'\n\nexport default function usePoolerScript(): readonly [boolean, boolean] {\n  const [state, setState] = React.useState<ScriptStatusInterface>({\n    loaded: false,\n    error: false\n  })\n\n  React.useEffect((): (() => void) | void => {\n    if (loadedScripts?.hasOwnProperty(src)) {\n      setState({\n        loaded: true,\n        error: false\n      })\n    } else {\n      loadedScripts.src = src\n\n      const script = document.createElement('script')\n      script.src = src\n      script.async = true\n\n      const onScriptLoad = (): void => {\n        setState({\n          loaded: true,\n          error: false\n        })\n      }\n\n      const onScriptError = (): void => {\n        delete loadedScripts.src\n\n        setState({\n          loaded: true,\n          error: true\n        })\n      }\n\n      script.addEventListener('load', onScriptLoad)\n      script.addEventListener('complete', onScriptLoad)\n      script.addEventListener('error', onScriptError)\n\n      document.body.appendChild(script)\n\n      return () => {\n        script.removeEventListener('load', onScriptLoad)\n        script.removeEventListener('error', onScriptError)\n      }\n    }\n  }, [])\n\n  return [state.loaded, state.error] as const\n}\n","import React from 'react'\nimport usePoolerScript from './script'\nimport { PoolerConfig } from './types'\n\nexport default function usePooler(poolerConfig: PoolerConfig): any {\n  const [loaded, error] = usePoolerScript()\n\n  React.useEffect(() => {\n    if (error) throw new Error('Unable to initialise Pooler SDK')\n  }, [error])\n\n  const handlePoolerSend = (): any => {\n    if (error) throw new Error('Unable to initialise Pooler SDK')\n\n    if (loaded) {\n      const config: PoolerConfig = {\n        amount: poolerConfig?.amount,\n        callback: poolerConfig?.callback,\n        email: poolerConfig?.email,\n        public_key: poolerConfig?.public_key,\n        transaction_reference: poolerConfig?.transaction_reference,\n        success_message: poolerConfig?.success_message,\n        error_message: poolerConfig?.error_message,\n        onClose: poolerConfig?.onClose\n      }\n      // @ts-ignore\n      const Pooler = window?.Pooler\n      return (\n        // @ts-ignore\n        Pooler.Popup(config)\n      )\n    }\n  }\n\n  return handlePoolerSend\n}\n","import React from 'react'\nimport { PoolerConfig } from './types'\nimport usePooler from './usePooler'\n\ninterface PoolerButtonProps extends PoolerConfig {\n  children?: string | React.ReactNode\n  className?: string\n  disabled?: boolean\n  loading?: boolean\n}\n\nexport default function poolerButton({\n  children,\n  className,\n  disabled,\n  loading,\n  ...rest\n}: PoolerButtonProps): JSX.Element {\n  const { handlePoolerSend } = usePooler(rest)\n  return (\n    <button\n      disabled={disabled}\n      className={className || 'pooler-button '}\n      onClick={handlePoolerSend}\n    >\n      {children}\n    </button>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}